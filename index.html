<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">

<!-- 拠点期待値計算側ページ確率計算ロジック&結果表示 終了 -->
    <title>確率計算</title>
    <link rel="stylesheet" href="style.css"> 
    <script>
        let storedNumbers = []; // 数字を記憶する配列
        const percentages = {
            '0': 0.00,
            '2': 2.78,
            '3': 5.56,
            '4': 8.33,
            '5': 11.11,
            '6': 13.89,
            '8': 13.89,
            '9': 11.11,
            '10': 8.33,
            '11': 5.56,
            '12': 2.78
        };

        function storeAndDisplay() {
            // 各プルダウンから値を取得
            storedNumbers = []; // 配列を初期化
            let totalPercentageA = 0; // グループAの合計の割合を初期化
            let totalPercentageB = 0; // グループBの合計の割合を初期化

            // グループAの計算
            for (let i = 1; i <= 3; i++) {
                const selectField = document.getElementById(`base-numberSelect${i}`);
                const value = selectField.value;
                storedNumbers.push(value); // 値を配列に保存
                totalPercentageA += percentages[value] || 0; // グループAの割合を合計に加算
            }

            // グループBの計算
            for (let i = 4; i <= 6; i++) {
                const selectField = document.getElementById(`base-numberSelect${i}`);
                const value = selectField.value;
                storedNumbers.push(value); // 値を配列に保存
                totalPercentageB += percentages[value] || 0; // グループBの割合を合計に加算
            }

            // 保存した値と合計の割合を表示
            const displayArea = document.getElementById('displayArea');
            let comparisonMessage = '';

            if (totalPercentageA > totalPercentageB) {
                const difference = totalPercentageA - totalPercentageB;
                comparisonMessage = `拠点候補Aの方が約${difference.toFixed(2)}%期待値が高いです。`;
            } else if (totalPercentageB > totalPercentageA) {
                const difference = totalPercentageB - totalPercentageA;
                comparisonMessage = `拠点候補Bの方が約${difference.toFixed(2)}%期待値が高いです。`;
            } else {
                comparisonMessage = 'どちらにおいても同じ確率で資源が手に入ります。';
            }

            displayArea.innerHTML = 
                `グループAの合計の割合: ${totalPercentageA.toFixed(2)}%<br>` +
                `グループBの合計の割合: ${totalPercentageB.toFixed(2)}%<br><br>` +
                comparisonMessage;
        }

        function showNewFeature() {
            document.getElementById('currentPage').style.display = 'none';
            document.getElementById('newFeaturePage').style.display = 'block';
        }

        function showCurrentPage() {
            document.getElementById('currentPage').style.display = 'block';
            document.getElementById('newFeaturePage').style.display = 'none';
        }
    </script>
    </head>
<!-- 拠点期待値計算側ページ確率計算ロジック&結果表示 終了 -->    

<!-- 拠点期待値計算側ページ切り替え用ボタン 開始 -->         
    <body>
    <div id="currentPage" style="display: block;">
        <h2>カタン期待値計算</h2>
        <button onclick="showCurrentPage()">拠点期待値計算</button>
        <button onclick="showNewFeature()">マップ期待値計算</button>
<!-- 拠点期待値計算側ページ切り替え用ボタン 開始 -->

<!-- 拠点期待候補入力用 開始 -->
        <p>拠点候補A</p>
        <select id="base-numberSelect1" class="base-select">
            <option value="">未入力</option>
            <option value="0">-</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>

        <select id="base-numberSelect2" class="base-select">
            <option value="">未入力</option>
            <option value="0">-</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>

        <select id="base-numberSelect3" class="base-select">
            <option value="">未入力</option>
            <option value="0">-</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
        <br>
        
        <p>拠点候補B</p>
        <select id="base-numberSelect4" class="base-select">
            <option value="">未入力</option>
            <option value="0">-</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>

        <select id="base-numberSelect5" class="base-select">
            <option value="">未入力</option>
            <option value="0">-</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>

        <select id="base-numberSelect6" class="base-select">
            <option value="">未入力</option>
            <option value="0">-</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
        <br><br>
        
        <button onclick="storeAndDisplay()">計算する</button>
        <div id="displayArea"></div>
    </div>
<!-- 拠点期待候補入力用 開始 -->

<!-- マップ期待値計算側ページ切り替え用ボタン 開始 -->
    <div id="newFeaturePage" style="display: none;">
        <h2>カタン拠点期待値早見表</h2>
    <button onclick="showCurrentPage()">拠点期待値計算</button>
    <button onclick="showNewFeature()">マップ期待値計算</button>
    <p>マップを入力してください。</p>
<!-- マップ期待値計算側ページ切り替え用ボタン 終了 -->

<!-- CSSファイル指定 開始 -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>正六角形のプルダウン</title>
        <link rel="stylesheet" href="style.css"> 
    </head>
<!-- CSSファイル指定 終了 -->

 <!-- 各六角形タイルの作成とオプションボタンの設定 開始 -->  
    <body>
    <div class="container"> <!-- 19個分格納 -->  
    <div class="hexagon" id="hexagon1">
        <select id="materialSelect1" onchange="changeColor('hexagon1', 'materialSelect1')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect1" class="map-number-select" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon2">
        <select id="materialSelect2" onchange="changeColor('hexagon2', 'materialSelect2')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect2" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
     </select>
    </div>
    <div class="hexagon" id="hexagon3">
        <select id="materialSelect3" onchange="changeColor('hexagon3', 'materialSelect3')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect3" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon4">
        <select id="materialSelect4" onchange="changeColor('hexagon4', 'materialSelect4')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect4" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon5">
        <select id="materialSelect5" onchange="changeColor('hexagon5', 'materialSelect5')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
      </select>
        <select id="numberSelect5" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon6">
        <select id="materialSelect6" onchange="changeColor('hexagon6', 'materialSelect6')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect6" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon7">
        <select id="materialSelect7" onchange="changeColor('hexagon7', 'materialSelect7')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect7" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon8">
        <select id="materialSelect8" onchange="changeColor('hexagon8', 'materialSelect8')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect8" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon9">
        <select id="materialSelect9" onchange="changeColor('hexagon9', 'materialSelect9')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect9" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon10">
        <select id="materialSelect10" onchange="changeColor('hexagon10', 'materialSelect10')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect10" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon11">
            <select id="materialSelect11" onchange="changeColor('hexagon11', 'materialSelect11')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect11" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon12">
        <select id="materialSelect12" onchange="changeColor('hexagon12', 'materialSelect12')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect12" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon13">
        <select id="materialSelect13" onchange="changeColor('hexagon13', 'materialSelect13')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect13" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon14">
        <select id="materialSelect14" onchange="changeColor('hexagon14', 'materialSelect14')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect14" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon15">
        <select id="materialSelect15" onchange="changeColor('hexagon15', 'materialSelect15')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect15" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon16">
        <select id="materialSelect16" onchange="changeColor('hexagon16', 'materialSelect16')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect16" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon17">
        <select id="materialSelect17" onchange="changeColor('hexagon17', 'materialSelect17')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect17" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon18">
        <select id="materialSelect18" onchange="changeColor('hexagon18', 'materialSelect18')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect18" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
    </div>
    <div class="hexagon" id="hexagon19">
        <select id="materialSelect19" onchange="changeColor('hexagon19', 'materialSelect19')">
            <option value="">-</option>
            <option value="砂">砂</option>
            <option value="土">土</option>
            <option value="木">木</option>
            <option value="麦">麦</option>
            <option value="羊">羊</option>
            <option value="鉄">鉄</option>
        </select>
        <select id="numberSelect19" onchange="updateDisplay()">
            <option value="">-</option>
            <option value="0">0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>
        </div>
<!-- 各六角形タイルの作成とオプションボタンの設定 終了 -->  

<!-- マップ期待値計算の拠点候補地点確率表示用 開始 -->   
        <div id="circleContainer" style="position: relative;"> <!-- 54個分格納 --> 
            <div class="map-circle" id="map-circle1">
                <span id="totalDisplay1"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle2">
                <span id="totalDisplay2"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle3">
                <span id="totalDisplay3"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle4">
                <span id="totalDisplay4"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle5">
                <span id="totalDisplay5"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle6">
                <span id="totalDisplay6"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle7">
                <span id="totalDisplay7"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle8">
                <span id="totalDisplay8"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle9">
                <span id="totalDisplay9"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle10">
                <span id="totalDisplay10"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle11">
                <span id="totalDisplay11"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle12">
                <span id="totalDisplay12"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle13">
                <span id="totalDisplay13"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle14">
                <span id="totalDisplay14"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle15">
                <span id="totalDisplay15"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle16">
                <span id="totalDisplay16"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle17">
                <span id="totalDisplay17"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle18">
                <span id="totalDisplay18"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle19">
                <span id="totalDisplay19"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle20">
                <span id="totalDisplay20"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle21">
                <span id="totalDisplay21"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle22">
                <span id="totalDisplay22"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle23">
                <span id="totalDisplay23"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle24">
                <span id="totalDisplay24"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle25">
                <span id="totalDisplay25"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle26">
                <span id="totalDisplay26"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle27">
                <span id="totalDisplay27"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle28">
                <span id="totalDisplay28"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle29">
                <span id="totalDisplay29"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle30">
                <span id="totalDisplay30"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle31">
                <span id="totalDisplay31"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle32">
                <span id="totalDisplay32"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle33">
                <span id="totalDisplay33"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle34">
                <span id="totalDisplay34"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle35">
                <span id="totalDisplay35"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle36">
                <span id="totalDisplay36"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle37">
                <span id="totalDisplay37"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle38">
                <span id="totalDisplay38"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle39">
                <span id="totalDisplay39"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle40">
                <span id="totalDisplay40"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle41">
                <span id="totalDisplay41"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle42">
                <span id="totalDisplay42"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle43">
                <span id="totalDisplay43"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle44">
                <span id="totalDisplay44"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle45">
                <span id="totalDisplay45"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle46">
                <span id="totalDisplay46"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle47">
                <span id="totalDisplay47"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle48">
                <span id="totalDisplay48"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle49">
                <span id="totalDisplay49"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle50">
                <span id="totalDisplay50"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle51">
                <span id="totalDisplay51"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle52">
                <span id="totalDisplay52"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle53">
                <span id="totalDisplay53"> 0%</span>
            </div>
            <div class="map-circle" id="map-circle54">
                <span id="totalDisplay54"> 0%</span>
            </div>
        </div>
    </div>
<!-- マップ期待値計算の拠点候補地点表示確率用 終了 -->  

<!-- マップ期待値計算の拠点候補地点の確率計算用 開始 -->  
    <script>
        const probabilityMapping = {
            0: 0.00,
            2: 2.78,
            3: 5.56,
            4: 8.33,
            5: 11.11,
            6: 13.89,
            8: 13.89,
            9: 11.11,
            10: 8.33,
            11: 5.56,
            12: 2.78
            };

		function updateCircleDisplays() {		
			// 各numberSelectの値を取得	

				const value1 = parseInt(document.getElementById('numberSelect1').value) || 0;
				const value2 = parseInt(document.getElementById('numberSelect2').value) || 0;
				const value3 = parseInt(document.getElementById('numberSelect3').value) || 0;
				const value4 = parseInt(document.getElementById('numberSelect4').value) || 0;
				const value5 = parseInt(document.getElementById('numberSelect5').value) || 0;
				const value6 = parseInt(document.getElementById('numberSelect6').value) || 0;
				const value7 = parseInt(document.getElementById('numberSelect7').value) || 0;
				const value8 = parseInt(document.getElementById('numberSelect8').value) || 0;
				const value9 = parseInt(document.getElementById('numberSelect9').value) || 0;
				const value10 = parseInt(document.getElementById('numberSelect10').value) || 0;
				const value11 = parseInt(document.getElementById('numberSelect11').value) || 0;
				const value12 = parseInt(document.getElementById('numberSelect12').value) || 0;
				const value13 = parseInt(document.getElementById('numberSelect13').value) || 0;
				const value14 = parseInt(document.getElementById('numberSelect14').value) || 0;
				const value15 = parseInt(document.getElementById('numberSelect15').value) || 0;
				const value16 = parseInt(document.getElementById('numberSelect16').value) || 0;
				const value17 = parseInt(document.getElementById('numberSelect17').value) || 0;
				const value18 = parseInt(document.getElementById('numberSelect18').value) || 0;
				const value19 = parseInt(document.getElementById('numberSelect19').value) || 0;

				
			// 各totalDisplayの計算	
				document.getElementById('totalDisplay1').innerText = `${probabilityMapping[value1].toFixed(1)}%`;
				document.getElementById('totalDisplay2').innerText = `${probabilityMapping[value2].toFixed(1)}%`;
				document.getElementById('totalDisplay3').innerText = `${probabilityMapping[value3].toFixed(1)}%`;
				document.getElementById('totalDisplay4').innerText = `${probabilityMapping[value1].toFixed(1)}%`;
				document.getElementById('totalDisplay5').innerText = `${(probabilityMapping[value1] + probabilityMapping[value2]).toFixed(1)}%`;
				document.getElementById('totalDisplay6').innerText = `${(probabilityMapping[value2] + probabilityMapping[value3]).toFixed(1)}%`;
				document.getElementById('totalDisplay7').innerText = `${probabilityMapping[value3].toFixed(1)}%`;
				document.getElementById('totalDisplay8').innerText = `${(probabilityMapping[value1] + probabilityMapping[value4]).toFixed(1)}%`;
				document.getElementById('totalDisplay9').innerText = `${(probabilityMapping[value1] + probabilityMapping[value2] + probabilityMapping[value5]).toFixed(1)}%`;
				document.getElementById('totalDisplay10').innerText = `${(probabilityMapping[value2] + probabilityMapping[value3] + probabilityMapping[value6]).toFixed(1)}%`;
				document.getElementById('totalDisplay11').innerText = `${(probabilityMapping[value3] + probabilityMapping[value7]).toFixed(1)}%`;
				document.getElementById('totalDisplay12').innerText = `${probabilityMapping[value4].toFixed(1)}%`;
				document.getElementById('totalDisplay13').innerText = `${(probabilityMapping[value1] + probabilityMapping[value4] + probabilityMapping[value5]).toFixed(1)}%`;
				document.getElementById('totalDisplay14').innerText = `${(probabilityMapping[value2] + probabilityMapping[value5] + probabilityMapping[value6]).toFixed(1)}%`;
				document.getElementById('totalDisplay15').innerText = `${(probabilityMapping[value3] + probabilityMapping[value6] + probabilityMapping[value7]).toFixed(1)}%`;
				document.getElementById('totalDisplay16').innerText = `${probabilityMapping[value7].toFixed(1)}%`;
				document.getElementById('totalDisplay17').innerText = `${(probabilityMapping[value4] + probabilityMapping[value8]).toFixed(1)}%`;
				document.getElementById('totalDisplay18').innerText = `${(probabilityMapping[value4] + probabilityMapping[value5] + probabilityMapping[value9]).toFixed(1)}%`;
				document.getElementById('totalDisplay19').innerText = `${(probabilityMapping[value5] + probabilityMapping[value6] + probabilityMapping[value10]).toFixed(1)}%`;
				document.getElementById('totalDisplay20').innerText = `${(probabilityMapping[value6] + probabilityMapping[value7] + probabilityMapping[value11]).toFixed(1)}%`;
				document.getElementById('totalDisplay21').innerText = `${(probabilityMapping[value7] + probabilityMapping[value12]).toFixed(1)}%`;
				document.getElementById('totalDisplay22').innerText = `${probabilityMapping[value8].toFixed(1)}%`;
				document.getElementById('totalDisplay23').innerText = `${(probabilityMapping[value4] + probabilityMapping[value8] + probabilityMapping[value9]).toFixed(1)}%`;
				document.getElementById('totalDisplay24').innerText = `${(probabilityMapping[value5] + probabilityMapping[value9] + probabilityMapping[value10]).toFixed(1)}%`;
				document.getElementById('totalDisplay25').innerText = `${(probabilityMapping[value6] + probabilityMapping[value10] + probabilityMapping[value11]).toFixed(1)}%`;
				document.getElementById('totalDisplay26').innerText = `${(probabilityMapping[value7] + probabilityMapping[value11] + probabilityMapping[value12]).toFixed(1)}%`;
				document.getElementById('totalDisplay27').innerText = `${probabilityMapping[value12].toFixed(1)}%`;
				document.getElementById('totalDisplay28').innerText = `${probabilityMapping[value8].toFixed(1)}%`;
				document.getElementById('totalDisplay29').innerText = `${(probabilityMapping[value8] + probabilityMapping[value9] + probabilityMapping[value13]).toFixed(1)}%`;
				document.getElementById('totalDisplay30').innerText = `${(probabilityMapping[value9] + probabilityMapping[value10] + probabilityMapping[value14]).toFixed(1)}%`;
				document.getElementById('totalDisplay31').innerText = `${(probabilityMapping[value10] + probabilityMapping[value11] + probabilityMapping[value15]).toFixed(1)}%`;
				document.getElementById('totalDisplay32').innerText = `${(probabilityMapping[value10] + probabilityMapping[value12] + probabilityMapping[value16]).toFixed(1)}%`;
				document.getElementById('totalDisplay33').innerText = `${probabilityMapping[value12].toFixed(1)}%`;
				document.getElementById('totalDisplay34').innerText = `${(probabilityMapping[value8] + probabilityMapping[value13]).toFixed(1)}%`;
				document.getElementById('totalDisplay35').innerText = `${(probabilityMapping[value9] + probabilityMapping[value13] + probabilityMapping[value14]).toFixed(1)}%`;
				document.getElementById('totalDisplay36').innerText = `${(probabilityMapping[value10] + probabilityMapping[value14] + probabilityMapping[value15]).toFixed(1)}%`;
				document.getElementById('totalDisplay37').innerText = `${(probabilityMapping[value11] + probabilityMapping[value15] + probabilityMapping[value16]).toFixed(1)}%`;
				document.getElementById('totalDisplay38').innerText = `${(probabilityMapping[value12] + probabilityMapping[value16]).toFixed(1)}%`;
				document.getElementById('totalDisplay39').innerText = `${probabilityMapping[value13].toFixed(1)}%`;
				document.getElementById('totalDisplay40').innerText = `${(probabilityMapping[value13] + probabilityMapping[value14] + probabilityMapping[value17]).toFixed(1)}%`;
				document.getElementById('totalDisplay41').innerText = `${(probabilityMapping[value14] + probabilityMapping[value15] + probabilityMapping[value18]).toFixed(1)}%`;
				document.getElementById('totalDisplay42').innerText = `${(probabilityMapping[value16] + probabilityMapping[value15] + probabilityMapping[value19]).toFixed(1)}%`;
				document.getElementById('totalDisplay43').innerText = `${probabilityMapping[value16].toFixed(1)}%`;
				document.getElementById('totalDisplay44').innerText = `${(probabilityMapping[value13] + probabilityMapping[value17]).toFixed(1)}%`;
				document.getElementById('totalDisplay45').innerText = `${(probabilityMapping[value14] + probabilityMapping[value17] + probabilityMapping[value18]).toFixed(1)}%`;
				document.getElementById('totalDisplay46').innerText = `${(probabilityMapping[value15] + probabilityMapping[value18] + probabilityMapping[value19]).toFixed(1)}%`;
				document.getElementById('totalDisplay47').innerText = `${(probabilityMapping[value16] + probabilityMapping[value19]).toFixed(1)}%`;
				document.getElementById('totalDisplay48').innerText = `${probabilityMapping[value17].toFixed(1)}%`;
				document.getElementById('totalDisplay49').innerText = `${(probabilityMapping[value17] + probabilityMapping[value18]).toFixed(1)}%`;
				document.getElementById('totalDisplay50').innerText = `${(probabilityMapping[value18] + probabilityMapping[value19]).toFixed(1)}%`;
				document.getElementById('totalDisplay51').innerText = `${probabilityMapping[value19].toFixed(1)}%`;
				document.getElementById('totalDisplay52').innerText = `${probabilityMapping[value17].toFixed(1)}%`;
				document.getElementById('totalDisplay53').innerText = `${probabilityMapping[value18].toFixed(1)}%`;
				document.getElementById('totalDisplay54').innerText = `${probabilityMapping[value19].toFixed(1)}%`;
                }
    </script>
<!-- マップ期待値計算の拠点候補地点の確率計算用 終了 -->  

<!-- 六角形タイルの色設定 開始 -->     
    <script>
        function changeColor(hexagonId, selectId) {
            const hexagon = document.getElementById(hexagonId);
            const materialSelect = document.getElementById(selectId).value;

            // 色の設定
            let color = '#e6e6fa'; // デフォルト色

            if (materialSelect) {
                switch (materialSelect) {
                    case '砂':
                        color = '#fffacd'; // 薄い黄色
                        break;
                    case '土':
                        color = '#a0522d'; // 茶色
                        break;
                    case '木':
                        color = '#006400'; // ダークグリーン
                        break;
                    case '麦':
                        color = '#ffd700'; // 黄金色
                        break;
                    case '羊':
                        color = '#adff2f'; // 蛍光グリーン
                        break;
                    case '鉄':
                        color = '#c0c0c0'; // 銀色
                        break;
                }
            }

            hexagon.style.backgroundColor = color;
        }
    </script>

<!-- 六角形タイルの色設定 終了 -->        

<!-- マップ上の8と6を赤色にする処理 開始 -->   
    <script>
        function updateAllNumberSelectColors() {
          const selects = document.querySelectorAll('select[id^="numberSelect"]');

            selects.forEach(select => {
            const value = select.value;

            // 古い value-* クラスを削除
            select.className = [...select.classList]
              .filter(cls => !cls.startsWith('value-'))
              .join(' ');

            // クラスを追加
            if (value) {
              select.classList.add('value-' + value);
              }   
            });
        }
    </script>
<!-- マップ上の8と6を赤色にする処理 終了 -->   

<!-- マップ期待値計算用の計算ボタン 開始 -->    
        <button onclick="updateCircleDisplays(); updateDisplay();">各拠点の期待値を計算する</button>
<!-- マップ期待値計算用の計算ボタン 終了 -->
 
<!-- マップ期待値計算用の計算計算結果用 開始 -->   
        <div id="mapDisplayArea" style="font-size: 30px;"></div>

        <script>
            function updateDisplay() {
                // 各資源の合計確率を初期化
                let totalProbabilities = {
                    '土': 0,
                    '木': 0,
                    '羊': 0,
                    '麦': 0,
                    '鉄': 0
                    };

                // 各六角形の入力を取得し、確率を計算
                for (let i = 1; i <= 19; i++) { // 六角形の数に応じて調整
                    const materialSelect = document.getElementById(`materialSelect${i}`)?.value;
                    const numberSelect = document.getElementById(`numberSelect${i}`)?.value;

                // 数字が入力されている場合のみ確率を計算
                if (numberSelect && probabilityMapping[numberSelect]) {
                    totalProbabilities[materialSelect] += probabilityMapping[numberSelect];
                    }
                }

                // 合計を表示
                const mapDisplayArea = document.getElementById('mapDisplayArea');
                mapDisplayArea.innerHTML = `
                    土の期待値: ${totalProbabilities['土'].toFixed(2)}%<br>
                    木の期待値: ${totalProbabilities['木'].toFixed(2)}%<br>
                    羊の期待値: ${totalProbabilities['羊'].toFixed(2)}%<br>
                    麦の期待値: ${totalProbabilities['麦'].toFixed(2)}%<br>
                    鉄の期待値: ${totalProbabilities['鉄'].toFixed(2)}%<br>
                `;
            

       // 円の色を変える処理を実行
       
        // ① すべての円の表示値を取得（文字列 "13.9%" → 数値 13.9 に変換）
        let mapCircledatas01 = [];
        for (let i = 1; i <= 54; i++) {
            const text = document.getElementById(`totalDisplay${i}`).innerText;
            const value = parseFloat(text.replace('%', '')) || 0;
            mapCircledatas01.push(value);
            }

        // ② 重複を除いて、大きい順にソート
        let mapCircledatas02 = [...new Set(mapCircledatas01)].sort((a, b) => b - a);

        // ③ 上位3件の数値を定義（存在しない場合は null）
        const mapCircledata01 = mapCircledatas02[0] ?? null;
        const mapCircledata02 = mapCircledatas02[1] ?? null;
        const mapCircledata03 = mapCircledatas02[2] ?? null;

        // ④ 背景色リセット＆色付け
        for (let i = 1; i <= 54; i++) {
            const span = document.getElementById(`totalDisplay${i}`);
            const container = document.getElementById(`map-circle${i}`);

            const val = parseFloat(span.innerText.replace('%', '')) || 0;

            if (val === 0) {
                container.style.backgroundColor = '#ffffff';
                continue; 
                }

            // 上位3件に応じて色分け
            if (val === mapCircledata01) {
                container.style.backgroundColor = '#ff7777';
            } else if (val === mapCircledata02) {
                container.style.backgroundColor = '#ffaaaa';
            } else if (val === mapCircledata03) {
                container.style.backgroundColor = '#ffdddd';
            } else {
                // その他はデフォルト（例：白に戻す）
                container.style.backgroundColor = '#ffffff';
            }
        }

        updateAllNumberSelectColors();
    }
        </script>
<!-- マップ期待値計算用の計算計算結果用 終了 -->   



<!-- マップ期待値計算入力ショートカット用ポップアップ表示用 開始 -->
    <button onclick="openModal01()">入力ショートカット</button>

    <div id="myModal01" class="modal01">
      <div class="modal-content01">
        <span class="close01" onclick="closeModal01()">&times;</span>
        <h4>各タイルを左上から順に入力してください</h4>
        <h4>木:き 土:つ 羊:ひ 麦:む 鉄:て 砂:す</h4>
        <input type="text" id="popupInput01" placeholder="ひらがなを入力">
        <br>
        <h4>数字が「2」の場所を選択してください</h4>
        <select id="popupInput02">
        <option value="2">上</option>
        <option value="4">左上</option>
        <option value="7">右上</option>
        <option value="13">左下</option>
        <option value="16">右下</option>
        <option value="18">下</option>
        </select>

        <button onclick="submitInput01()" class="small-button" >送信</button>
      </div>
    </div>
<!-- マップ期待値計算入力ショートカット用ポップアップ表示用 終了 -->
     </div>

<!-- マップ期待値計算入力ショートカット用ポップアップ処理 開始 -->
        <script>
          function openModal01() {
            document.getElementById('myModal01').style.display = 'block';
          }

          function closeModal01() {
            document.getElementById('myModal01').style.display = 'none';
          }

          function submitInput01() {
            const mapInput = document.getElementById('popupInput01').value.trim();
            const tileInput = parseInt(document.getElementById('popupInput02').value.trim());

            const charToMaterial = {
              'き': '木', 'つ': '土', 'ひ': '羊',
              'む': '麦', 'て': '鉄', 'す': '砂'
            };

            for (let i = 0; i < mapInput.length && i < 19; i++) {
              const char = mapInput[i];
              const material = charToMaterial[char];
              if (material) {
                const selectId = `materialSelect${i + 1}`;
                const hexId = `hexagon${i + 1}`;
                const select = document.getElementById(selectId);
                if (select) {
                  select.value = material;
                  changeColor(hexId, selectId);
                }
              }
            }
            // 6通りのパターンの対応表を記載
            const numberMap = {
              2: new Map([
                [3,5],[2,2],[1,6],[4,3],[8,8],[13,10],[17,9],[18,12],[19,11],
                [16,4],[12,8],[7,10],[6,9],[5,4],[9,5],[14,6],[15,3],[11,11]
              ]),
              4: new Map([
                [1,5],[4,2],[8,6],[13,3],[17,8],[18,10],[19,9],[16,12],[12,11],
                [7,4],[3,8],[2,10],[5,9],[9,4],[14,5],[15,6],[11,3],[6,11]
              ]),
              13: new Map([
                [8,5],[13,2],[17,6],[18,3],[19,8],[16,10],[12,9],[7,12],[3,11],
                [2,4],[1,8],[4,10],[9,9],[14,4],[15,5],[11,6],[6,3],[5,11]
              ]),
              18: new Map([
                [17,5],[18,2],[19,6],[16,3],[12,8],[7,10],[3,9],[2,12],[1,11],
                [4,4],[8,8],[13,10],[14,9],[15,4],[11,5],[6,6],[5,3],[9,11]
              ]),
              16: new Map([
                [19,5],[16,2],[12,6],[7,3],[3,8],[2,10],[1,9],[4,12],[8,11],
                [13,4],[17,8],[18,10],[15,9],[11,4],[6,5],[5,6],[9,3],[14,11]
              ]),
              7: new Map([
                [12,5],[7,2],[3,6],[2,3],[1,8],[4,10],[8,9],[13,12],[17,11],
                [18,4],[19,8],[16,10],[11,9],[6,4],[5,5],[9,6],[14,3],[15,11]
              ])
            };

            const entryMap = numberMap[tileInput];
            if (entryMap) {
              const entries = Array.from(entryMap.entries());
              const tileOrder = entries.map(entry => entry[0]);
              const valueQueue = entries.map(entry => entry[1]);
              let valuePtr = 0;

              for (let i = 0; i < tileOrder.length; i++) {
                const tileNum = tileOrder[i];
                const material = document.getElementById(`materialSelect${tileNum}`);
                const numberSelect = document.getElementById(`numberSelect${tileNum}`);
                if (!material || !numberSelect) continue;

                if (material.value === '砂') {
                  continue;
                }

                if (valuePtr < valueQueue.length) {
                  numberSelect.value = valueQueue[valuePtr].toString();
                  valuePtr++;
                }
              }

              for (let i = 1; i <= 19 && valuePtr < valueQueue.length; i++) {
                const numSel = document.getElementById(`numberSelect${i}`);
                if (!numSel || numSel.value !== '') continue;

                const material = document.getElementById(`materialSelect${i}`);
                if (material && material.value !== '砂') {
                  numSel.value = valueQueue[valuePtr].toString();
                  valuePtr++;
                }
              }
            }

            closeModal01();
            alert('マップを更新しました。');
          }
        </script>
<!-- マップ期待値計算入力ショートカット用ポップアップ処理 終了 -->



    <br><br><br><br><br><br><br><br>
    <hr> 
<!-- アップデート情報欄 開始 -->    
    <h3>アップデート情報</h3>
    <div id="updateInfo"> 
        <p>2025/07/10:マップ期待値計算機能で期待値の高い拠点候補に色を追加</p>  
        <p>2025/07/10:一部UIの調整</p> 
        <p>2025/07/10:軽微な不具合の修正</p>           
        <p>2025/07/09:マップ期待値計算機能にショートカット入力を追加</p>   
        <p>2025/06/08:マップ期待値計算機能の実装</p>   
        <p>2025/06/04:URLを変更</p>
        <p>2025/06/02:アップデート情報欄追加</p>
        <p>2025/05/29:ブラウザ版リリース</p>
        <p>2025/05/26:β版をGoogleスプレッドシートにてリリース</p>
      </div>
<!-- アップデート情報欄 終了-->      
  
  </body>
  </html>
